TITLE:
Devblog #2 - L'automatisation ne concerne pas seulement le gameplay

SUBTITLE:
Parlons un peu de l'automatisation, mais c√¥t√© d√©veloppeur

SUMMARY:
Parlons un peu de l'automatisation, mais c√¥t√© d√©veloppeur

BODY:
[b]Historique du DevBlog[/b]
[olist]
[*] [url=https://store.steampowered.com/news/app/2146380/view/7184986051960660929]09/2023 - #1 - Qui ? Quoi ? O√π ? Quand ?[/url]
[*] [b]10/2023 - #2 - L'automatisation ne concerne pas seulement le gameplay[/b] (Ici !)
[/olist]

Bonjour !

Bienvenue sur ce deuxi√®me devblog de [b]Manufactur'inc[/b] !
Si vous n'avez pas lu le premier et que vous voulez en savoir plus sur le jeu, vous pouvez [url=https://store.steampowered.com/news/app/2146380/view/7184986051960660929]le lire ici[/url] !

Aujourd'hui, nous allons parler d'[i]automatisation[/i], mais pas celle que vous pourrez mettre en place dans le jeu, nous allons parler de la fa√ßon dont j'automatise mes propres process/outils pour me faciliter la vie afin de [b]sortir des mises √† jour plus rapidement[/b] et [b]tester automatiquement des parties enti√®res du jeu[/b].

Comme je l'ai dit dans le premier devblog, je suis ici pour vulgariser les choses. J'esp√®re partager des morceaux de ma vie de d√©veloppeur avec tout le monde ici sans entrer dans les d√©tails techniques :)

[h1]Mises √† jour automatiques[/h1]

Une chose qui m'a fait perdre *beaucoup* de temps sur mon premier jeu, c'est la publication des mises √† jour. Vous n'imaginez pas √† quel point c'est p√©nible de construire manuellement un jeu pour 3 syst√®mes d'exploitation (Windows, MacOS, Linux) et deux architectures chacun (32bits/64bits, sauf pour MacOS qui n'a que cette derni√®re).

Donc, quelque chose que j'ai mis en place il y a 3 ans avec [url=https://store.steampowered.com/app/1299430/Extortion/]Exortion[/url] √©tait de cr√©er automatiquement les 5 builds sur un serveur √† chaque fois que j'allais "sauvegarder mon code" sur celui-ci.

Cela a r√©duit le temps que je consacrais √† la sortie d'une mise √† jour de plus d'une heure √† ~15 minutes : t√©l√©charger 5 fichiers .zip depuis mon serveur, les envoyer sur Steam et itch, d√©clencher la mise √† jour de Steam, et c'est parti !

Vous avez envie de dire "C'est cool" ?
Oui, mais certaines am√©liorations √©taient encore possibles !

Un an plus tard, j'utilisais [url=https://developer.valvesoftware.com/wiki/SteamCMD]SteamCMD[/url] pour pousser automatiquement vers les serveurs Steam et [url=https://itch.io/docs/butler/]Butler[/url] pour pousser automatiquement vers itch.io.

Qu'est-ce qu'il me reste √† faire maintenant ? Appuyer sur le bouton "release", et √©crire une belle annonce de mise √† jour !

Voici donc ce que cela donne pour la d√©mo de [url=https://store.steampowered.com/app/1299430/Extortion/]Exortion[/url] par exemple, plut√¥t cool non ? üòÅ

[img]{STEAM_CLAN_IMAGE}/44529211/b7d935bc59ec1b34f533ab0c9d3e596a6c11e8d6.png[/img]

Bien s√ªr, Manufactur'inc dispose d√©j√† de cette automatisation, d√®s le premier jour de d√©veloppement (et c'est vraiment cool de l'avoir !) :

[img]{STEAM_CLAN_IMAGE}/44529211/baeb62343b13ccfc545d221c9fd988e228e1608c.png[/img]

[h1]Tests automatis√©s[/h1]

Un autre sujet important qui a pris beaucoup de temps dans les actions r√©p√©titives √©tait les tests. Pouvoir re-tester toutes les fonctionnalit√©s d'un jeu avant une mise √† jour est quelque chose de presque impossible √† faire manuellement (et on ne parle m√™me pas du temps pass√© !).

L'automatisation des tests est quelque chose de courant dans mon domaine d'origine (le d√©veloppement web) et j'ai voulu l'appliquer √† mes jeux √©galement, cela permet d'√©viter beaucoup de bugs (pas tous, malheureusement !) et de tester des dizaines de fois plus vite qu'un humain, tout en √©tant plus fiable !

Alors, comment et qu'est-ce que je teste ? Je fais deux types de tests :
- Des tests sp√©cifiques √† une fonctionnalit√© (appel√©s tests unitaires)
- Tests "globaux" (appel√©s "end-to-end")

[h3]Tests unitaires[/h3]

Un bon exemple de [b]test unitaire[/b] est cette partie de l'interface utilisateur :
[img]{STEAM_CLAN_IMAGE}/44529211/a45fff2263fb9ce9f49354d9f5ee063dc793b1f9.png[/img]

Je dois v√©rifier que le num√©ro s'affiche correctement, par exemple

"123" s'affiche comme "123"
"1230" s'affiche comme "1.23K"
"1200001" est affich√© comme "1.2M"
et ainsi de suite

Ainsi, j'ai donc √©crit de nombreuses r√®gles √† ce sujet, et √† chaque fois que je lance des tests, ils v√©rifient que c'est correct ! Ainsi, si jamais je modifie le syst√®me parce que j'ai besoin d'avoir "P" apr√®s "K" (=1 000), "M" (=1 000 000), "G" (=1 000 000 000), "T" (=1 000 000 000), je peux √™tre s√ªr que je n'ai pas accidentellement cass√© quoi que ce soit !

[h3]Les tests End-to-end[/h3]

Pour ce qui est des tests [b]end-to-end[/b], je vais tester un sc√©nario du d√©but √† la fin, par ex :
- Se connecter au jeu
- Placer un b√¢timent
- V√©rifier que la ressource X est g√©n√©r√©e
- Aller dans l'onglet des contrats
- V√©rifier que nous avons r√©ussi √† contacter Y (parce qu'il nous a demand√© de construire ce b√¢timent)
- et ainsi de suite

Si vous voulez voir √† quoi cela ressemble pour [url=https://store.steampowered.com/app/1730540/Alchemistry/]Alchemistry[/url] vous pouvez regarder une vid√©o [url=https://cloud.dysnomia.studio/f/52ec625f17684a2284b6/]ici[/url] (D√©sol√©, je ne peux pas l'int√©grer sur Steam !).
Ou un autre exemple sympa pour Extortion :
[img]https://cdn.discordapp.com/attachments/906520560559882272/1165292262037651526/tests_extortion_short.gif[/img]

Les outils de test et d'administration ont √©t√© mes priorit√©s depuis l'annonce du jeu (c'est pourquoi j'en parle ici). Ces outils me permettront de travailler plus facilement et plus rapidement √† l'avenir (et j'en aurai besoin, puisque je serai seul sur ce projet !), ils sont donc une priorit√©.

[h1]Conclusion[/h1]

J'esp√®re que vous avez aim√© ce petit tour d'horizon des coulisses du d√©veloppement de mes jeux !
Si vous pensez que des choses pourraient √™tre am√©lior√©es, vous pouvez ajouter un commentaire sous cet article et je serais ravi d'en parler ! Vous pouvez √©galement [url=https://discord.com/invite/c8aARey]rejoindre le discord de Dysnomia[/url] pour que nous puissions en parler !

Si vous souhaitez me suivre ailleurs et obtenir plus qu'une mise √† jour mensuelle sur l'√©tat du jeu, vous pouvez:
- [url=https://discord.com/invite/c8aARey]Rejoindre le Discord de Dysnomia[/url]
- [url=https://www.tiktok.com/@elanis42]Me suivre sur Tiktok[/url] (j'essaierai de poster autant que possible ici, mais ca prend beaucoup de temps !)
- [url=https://www.twitch.tv/elanis42]Suivez-moi sur Twitch[/url] o√π je fais parfois du d√©veloppement de jeux en live.
- [url=https://mastodon.gamedev.place/@Elanis]Suivez-moi sur mastodon[/url]
- [url=https://bsky.app/profile/elanis.bsky.social]Suivez mon nouveau compte Bluesky ![/url]

Merci d'avoir lu ce second devblog, et bon week-end !
Elanis